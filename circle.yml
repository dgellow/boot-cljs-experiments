dependencies:
  pre:
    - wget https://github.com/boot-clj/boot-bin/releases/download/2.4.2/boot.sh
    - mv boot.sh boot && chmod a+x boot && sudo mv boot /usr/local/bin

test:
  override:
    - BOOT_JVM_OPTIONS="-Xmx3g" boot build

  post:
    - git checkout gh-pages
    - BOOT_JVM_OPTIONS="-Xmx3g" boot build

deployment:
  production:
    branch: master
    commands:
      - git checkout gh-pages
      - git config --global user.email build@circleci.com
      - git config --global user.name CircleCI
      - git status
      - git add --all
      - git commit -m "Update (`date '+%F %T %Z'`) [ci skip]"
      - git push origin gh-pages